!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){!function(e,t){function r(){var t={};return e.ajax({type:"GET",url:U,async:!1,dataType:"json",success:function(e){t=e}}),t}function o(e){b=1==e?"random_name":"local_name"}function a(){if(j=timestamp=Date.parse(new Date)/1e3,y<j+3){var e=r();return g=e.host,_=e.policy,d=e.accessid,x=e.signature,y=parseInt(e.expire),v=e.callback,h=e.dir,!0}return!1}function s(e){e=e||32;var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=t.length,r="";for(i=0;i<e;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}function l(e){return pos=e.lastIndexOf("."),suffix="",-1!=pos&&(suffix=e.substring(pos)),suffix}function u(e){return"local_name"==b?w+="${filename}":"random_name"==b&&(suffix=l(e),w=h+s(10)+suffix),""}function f(e){return"local_name"==b?(tmp_name=w,tmp_name=tmp_name.replace("${filename}",e),tmp_name):"random_name"==b?w:void 0}function p(e,t,n){0==n&&(n=a()),w=h,""!=t&&(suffix=l(t),u(t)),new_multipart_params={key:w,policy:_,OSSAccessKeyId:d,success_action_status:"200",callback:v,signature:x},e.setOption({url:g,multipart_params:new_multipart_params}),e.start()}var c=n(1),m=n(2),d="",g="",_="",x="",v="",h="",y=0,w="",b="",U="../php/config.php",j=timestamp=Date.parse(new Date)/1e3;e.fn.swalupload=function(i){var r={flash:"lib/plupload-2.1.2/js/Moxie.swf",silverlight:"lib/plupload-2.1.2/js/Moxie.xap",serverSignUrl:"",rename:!0,maxfilesize:"10mb",postButton:null,multi:!1,FilesAdded:function(e,t,n){},UploadProgress:function(e,t,n){},FileUploaded:function(e,t,n,i){},UploadComplete:function(e,t,n){},Error:function(e,t,n){alert(e)}},a=this,s=jQuery.extend(r,i);return""!=s.serverSignUrl&&(U=s.serverSignUrl),s=n(3)(s),e(this).each(function(n,i){var r=new t.Uploader({runtimes:"html5,flash,silverlight,html4",multi_selection:typeof s.multi,browse_button:e(i)[0],container:e(a).parent()[0],url:"http://oss.aliyuncs.com",flash_swf_url:s.flash,silverlight_xap_url:s.silverlight,filters:s.filters,init:{PostInit:function(){null!=s.postButton?e(s.postButton).click(function(){return p(r,"",!1),!1}):p(r,"",!1)},FilesAdded:function(n,o){t.each(o,function(r){r.ext=l(r.name).substring(1),r.ratio=t.formatSize(r.size),-1==e.inArray(r.ext.toLowerCase(),["jpg","png","gif"])?(r.previewdata="",s.FilesAdded(r,i,n)):c(r,function(e){r.previewdata=e,s.FilesAdded(r,i,n)})}),null==s.postButton&&p(r,"",!1)},BeforeUpload:function(e,t){o(s.rename),p(e,t.name,!0)},UploadProgress:function(e,t){s.UploadProgress(t,i,e)},FileUploaded:function(e,t,n){t.ext=l(t.name).substring(1),t.path=f(t.name)+m.get(),s.FileUploaded(t,n,i,e),m.clear()},UploadComplete:function(e,t){t.length>0&&(s.UploadComplete(t,i,e),m.clear())},Error:function(e,t){-600==t.code?s.Error("选择的文件超过了"+s.filters.max_file_size,i,e):-601==t.code?s.Error("不能上传该类型的文件",i,e):-602==t.code?s.Error("该文件已经上传过了",i,e):s.Error(t.response,i,e)}}});r.init()}),{setCrop:function(e){m.set(e)},getCrop:function(){return m.get()},clearCrop:function(){m.clear()}}}}(jQuery,plupload)},function(e,t){e.exports=function(e,t){if(e&&/image\//.test(e.type))if("image/gif"==e.type){var n=new mOxie.FileReader;n.onload=function(){t(n.result),n.destroy(),n=null},n.readAsDataURL(e.getSource())}else{var i=new mOxie.Image;i.onload=function(){var e="image/jpeg"==i.type?i.getAsDataURL("image/jpeg",80):i.getAsDataURL();t&&t(e),i.destroy(),i=null},i.load(e.getSource())}}},function(e,t){var n="";t.get=function(){return""==n?"":"?x-oss-process=image/crop,x_"+n.x+",y_"+n.y+",w_"+n.width+",h_"+n.height},t.clear=function(){n=""},t.set=function(e){var t={x:0,y:0,width:0,height:0};if(void 0!==e)for(var i in t)void 0!==e[i]&&(t[i]=Math.floor(e[i]));n=t}},function(e,t){var n=[{title:"Image files",extensions:"jpg,gif,png,bmp"},{title:"Zip files",extensions:"zip,rar"}];e.exports=function(e){if(void 0===e.filters){var t={mime_types:n,max_file_size:"10mb",prevent_duplicates:!1};navigator.userAgent.indexOf("Chrome")>-1?t.mime_types=[]:t.mime_types=n,e.filters=t}else void 0===e.filters.mime_types&&(e.filters.mime_types=n),void 0===e.filters.max_file_size&&(e.filters.max_file_size="10mb"),void 0===e.filters.prevent_duplicates&&(e.filters.prevent_duplicates=!1);return e}}]);